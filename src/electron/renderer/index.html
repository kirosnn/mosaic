<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mosaic</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;500;600;700&display=swap" />
  <link rel="stylesheet" href="./styles/theme.css" />
  <link rel="stylesheet" href="./styles/base.css" />
  <link rel="stylesheet" href="./styles/topbar.css" />
  <link rel="stylesheet" href="./styles/layout.css" />
  <link rel="stylesheet" href="./styles/sidebar.css" />
  <link rel="stylesheet" href="./styles/explorer.css" />
  <link rel="stylesheet" href="./styles/editor.css" />
  <link rel="stylesheet" href="./styles/chat.css" />
  <link rel="stylesheet" href="./styles/usage.css" />
  <link rel="stylesheet" href="./styles/modal.css" />
</head>

<body>
  <div id="root"></div>
  <script>
    (function bootstrapRenderer() {
      const root = document.getElementById("root");
      function showBootstrapError(message) {
        if (!root) return;
        root.innerHTML = "";
        const screen = document.createElement("section");
        screen.className = "fatal-screen";
        const card = document.createElement("article");
        card.className = "fatal-screen-card";
        const title = document.createElement("h1");
        title.className = "fatal-screen-title";
        title.textContent = "Bootstrap error";
        const detail = document.createElement("pre");
        detail.className = "fatal-screen-message";
        detail.textContent = String(message || "Unable to load renderer bundle");
        card.appendChild(title);
        card.appendChild(detail);
        screen.appendChild(card);
        root.appendChild(screen);
      }

      try {
        const path = require("path");
        const { fileURLToPath } = require("url");
        const currentFilePath = fileURLToPath(window.location.href);
        const rendererDir = path.dirname(currentFilePath);
        const candidates = [
          path.join(rendererDir, "dist", "index.js"),
          path.join(process.cwd(), "src", "electron", "renderer", "dist", "index.js"),
        ];

        let loaded = false;
        let lastError = null;
        for (const candidate of candidates) {
          try {
            require(candidate);
            loaded = true;
            break;
          } catch (error) {
            lastError = error;
          }
        }

        if (!loaded) {
          const message = lastError && lastError.message ? lastError.message : String(lastError || "Unable to load renderer bundle");
          showBootstrapError(message);
        }
      } catch (error) {
        const message = error && error.message ? error.message : String(error);
        showBootstrapError(message);
      }
    })();
  </script>
</body>

</html>